(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    //Allow using this built library as an AMD module
    //in another project. That other project will only
    //see this AMD call, not the internal modules in
    //the closure below.
    define([], factory);
  } else {
    //Browser globals case. Just assign the
    //result to a property on the global.
    root.Omnipaste = factory();
  }
}(this, function () {
  //almond, and the rest of the modules will be inlined here
  <%= raw Rails.application.assets['OmnipasteSDK.js'].to_s %>

  //Ask almond to synchronously require the
  //module value for 'Omnipaste' here and return it as the
  //value to use for the public API.
  var Omnipaste = require('OmnipasteSDK');
  Omnipaste.initialize('<%= @api_key %>');

  return Omnipaste;
}));
